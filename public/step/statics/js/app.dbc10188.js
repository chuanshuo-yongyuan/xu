!function(t){function e(e){for(var o,a,s=e[0],u=e[1],c=e[2],f=0,l=[];f<s.length;f++)a=s[f],i[a]&&l.push(i[a][0]),i[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);for(d&&d(e);l.length;)l.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={app:0},r=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,o){n=i[t]=[e,o]});e.push(n[2]=o);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.src=function(t){return a.p+"statics/js/"+({about:"about"}[t]||t)+"."+{about:"9586ff59"}[t]+".js"}(t),r=function(e){s.onerror=s.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,a=new Error("Loading chunk "+t+" failed.\n("+o+": "+r+")");a.type=o,a.request=r,n[1](a)}i[t]=void 0}};var u=setTimeout(function(){r({type:"timeout",target:s})},12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(e)},a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/step/",a.oe=function(t){throw t};var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=u;r.push([0,"chunk-vendors"]),n()}({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("0651");n.n(o).a},"0651":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"getAddressList",function(){return et}),n.d(o,"getUserPositionInfo",function(){return nt}),n.d(o,"getUserInfo",function(){return ot});var i={};n.r(i),n.d(i,"showLogin",function(){return rt}),n.d(i,"userInfo",function(){return at}),n.d(i,"userWechatInfo",function(){return st}),n("28a5"),n("4d48");var r=n("d1e1"),a=(n("81e6"),n("9ffb")),s=(n("e7e5"),n("d399")),u=(n("66b9"),n("b650")),c=(n("e17f"),n("2241")),d=(n("be7f"),n("565f")),f=(n("d1cf"),n("ee83")),l=(n("2994"),n("2bdd")),p=(n("c194"),n("7744")),m=(n("0653"),n("34e9")),h=(n("cadf"),n("551c"),n("f751"),n("097d"),n("8bbf")),g=n.n(h),w=n("cebc"),v=(n("ac1e"),n("543e")),b=n("5880"),_=n.n(b),I={name:"app",components:{Loading:v.a},computed:Object(w.a)({},Object(b.mapState)(["isLoading","direction","showLogin"])),mounted:function(){}},S=(n("034f"),n("2877")),y=Object(S.a)(I,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:"router-"+("forward"===t.direction?"in":"out")}},[n("div",[n("keep-alive",[t.$route.meta.keepAlive?n("router-view"):t._e()],1),t.$route.meta.keepAlive?t._e():n("router-view")],1)]),n("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loading",attrs:{type:"spinner"}})],1)},[],!1,null,null,null).exports,O=n("6389"),T=n.n(O),E=(n("6b54"),n("ac6a"),n("456d"),n("7618"));function A(){var t=navigator.userAgent,e=/(Android);?[\s\/]+([\d.]+)?/.test(t),n=/(iPad).*OS\s([\d_]+)/.test(t);return{isAndroid:e,isIpad:n,isIpod:/(iPod)(.*OS\s([\d_]+))?/.test(t),isIphone:!n&&/(iPhone\sOS)\s([\d_]+)/.test(t),isWechat:/micromessenger/i.test(t),isAlipay:/alipayclient/i.test(t),isCwApp:/ccwb_app/i.test(t),isCwAppAndroid:/ccwb_app\/android/i.test(t),isCwAppIos:/ccwb_app\/ios/i.test(t)}}n("3b2b"),n("a481");var L={name:"home",data:function(){return{lists:[],step:"",message:"",time:"",showTime:!1,show:!1,minDate:new Date(2019,1,30),maxDate:new Date(2025,12,31),currentDate:new Date}},computed:{},created:function(){this.getLists()},methods:{confirm:function(){var t=this;this.$request("add",{step:this.step,message:this.message}).then(function(e){200===e.code?t.getLists():t.$toast(e.message)})},getLists:function(){var t=this;this.$request("lists",{time:this.time}).then(function(e){t.lists=e.data})},confirmTime:function(t){this.time=function(t,e){var n=1<arguments.length&&void 0!==e?e:"yyyy-MM-dd",o=new Date(t),i={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours()%12==0?12:o.getHours()%12,"H+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),S:o.getMilliseconds()};for(var r in/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(n)&&(n=n.replace(RegExp.$1,(1<RegExp.$1.length?2<RegExp.$1.length?"/u661f/u671f":"/u5468":"")+{0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"}[o.getDay()+""])),i)new RegExp("("+r+")").test(n)&&(n=n.replace(RegExp.$1,1===RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return n}(t),this.getLists(),this.showTime=!1},cancelTime:function(){this.showTime=!1}}},x=(n("de16"),Object(S.a)(L,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("van-cell-group",t._l(t.lists,function(t,e){return n("van-cell",{key:e,attrs:{title:t.step,value:t.create_time,label:t.message}})}),1),n("van-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.show=!0}}},[t._v("新增")]),n("van-button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.showTime=!0}}},[t._v("选择时间")]),n("van-dialog",{attrs:{title:"录入","show-cancel-button":"",size:"small"},on:{confirm:t.confirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-field",{attrs:{clearable:"",number:"number",placeholder:"请输入新的步数~"},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}}),n("van-field",{attrs:{clearable:"",number:"textarea",placeholder:"当是的消息描述~",autosize:{maxHeight:100,minHeight:50}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),n("van-datetime-picker",{directives:[{name:"show",rawName:"v-show",value:t.showTime,expression:"showTime"}],staticClass:"datetime-picker",attrs:{type:"date","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.confirmTime,cancel:t.cancelTime},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)},[],!1,null,null,null).exports);g.a.use(T.a);var C=new T.a({routes:[{path:"/",name:"home",component:x},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),R=n("31bd"),j=n("fe3c"),N=n.n(j),P=n("283e"),D=n.n(P),U=A();function k(){try{if(U.isCwAppAndroid)window.Android.toCWLogin();else if(U.isCwAppIos){var t=window.location.href;window.prompt("toCWLogin",JSON.stringify({redirect_url:t}))}}catch(t){}}function $(){try{var t={};return U.isCwAppAndroid?t=window.Android.getCWLocationInfo():U.isCwAppIos&&(t=window.prompt("getCWLocationInfo","")),{province:(t=JSON.parse(t)).cw_province,city:t.cw_city,district:t.cw_district,latitude:t.cw_latitude,longitude:t.cw_longitude,address:t.cw_address}}catch(t){}}function W(){try{var t=$();return{latitude:t.latitude,longitude:t.longitude}}catch(t){}}function M(){try{return function(){try{var t={};return U.isCwAppAndroid?t=window.Android.getCWUserInfo():U.isCwAppIos&&(t=window.prompt("getCWUserInfo","")),JSON.parse(t)}catch(t){}}().token}catch(t){return window.localStorage.getItem("ccwb_user_new_token")}}var H={userWechatInfo:window.sessionStorage.getItem("USER_WECHAT_INFO")||"",userInfo:M(),userPosition:$(),userLatAndLon:W(),showLogin:!1,isLoading:!1,direction:"forward"},q=Object(w.a)({},{test:{url:"test",method:"post"}},{add:{url:"add",method:"post"},lists:{url:"lists",method:"get"}}),G=n("cebe"),F=n.n(G),z=window.ApiConfig||{};z.domain="//step.wbloc.com/api/";var J={baseURL:z.domain,timeout:2e5,headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},transformRequest:[function(t){var e="";for(var n in t)e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&";return e}],responseType:"json"},V=F.a.create(J);V.interceptors.request.use(function(t){var e=dt.state.userInfo;return e&&(t.headers.Authorization=e),t},function(t){return Promise.reject(t)}),V.interceptors.response.use(function(t){return t},function(t){return Promise.reject(t)});var B=V;function X(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];n&&"boolean"==typeof n?tt():n&&"string"==typeof n&&tt();var o=q[t];if(o){var i=Object(E.a)(e);return null!=i&&"object"===i||(e={}),"get"===o.method?K(o.url,e,n):"post"===o.method?Y(o.url,e,n):"非法请求"}Z()}function Y(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return n&&"boolean"==typeof n?tt():n&&"string"==typeof n&&tt(),new Promise(function(n,o){B.post(t,e).then(function(t){Q(t.data),n(t.data)}).catch(function(t){Z(),o(t)})})}function K(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return n&&"boolean"==typeof n?tt():n&&"string"==typeof n&&tt(),new Promise(function(n,o){B.get(t,{params:e}).then(function(t){Q(t.data),n(t.data)}).catch(function(t){Z(),o(t)})})}function Q(t){if(null==t)return setTimeout(function(){return Z()},800),!1;if(200===t.code&&!1===t.status)return setTimeout(function(){return Z()},800),!1;if(401===t.code||40403===t.success){if(!A().isCwApp)return function(t){Object(s.a)(t)}("请先绑定手机"),dt.commit("SET_SHOW_LOGIN",!0),setTimeout(function(){return Z()},800),!1;k()}setTimeout(function(){return Z()},800)}function Z(){s.a.clear()}function tt(){s.a.loading({forbidClick:!0,loadingType:"spinner",duration:0,message:"加载中..."})}function et(t){var e=t.commit;return t.state.userInfo&&X("addressList").then(function(t){e("SET_USER_ADDRESS",t.data)}),!1}function nt(t){var e=t.commit,n=t.state;if(!n.userPosition||!n.position)if(A().isCwApp){var o=W(),i=$();e("SET_USER_POSITION",i),e("SET_USER_LAT_AND_LON",o)}else new BMap.Geolocation({maximumAge:10}).getCurrentPosition(function(t){if(this.getStatus()==BMAP_STATUS_SUCCESS){var n={latitude:t.point.lat,longitude:t.point.lng},o={province:t.address.province,city:t.address.city,district:t.address.district,latitude:t.latitude,longitude:t.longitude,address:t.address.street?t.address.street:"我的位置"};e("SET_USER_POSITION",o),e("SET_USER_LAT_AND_LON",n)}})}function ot(t){var e=t.commit,n=t.state;return new Promise(function(t){var o=M();e("SET_USER_INFO",o),t(n.userInfo)})}var it,rt=function(t){return t.showLogin},at=function(t){return t.userInfo},st=function(t){return t.userWechatInfo},ut=n("bd86"),ct=(it={},Object(ut.a)(it,"SET_ISLOADING",function(t,e){t.isLoading=e.isLoading}),Object(ut.a)(it,"SET_DIRRECTION",function(t,e){t.direction=e.direction}),Object(ut.a)(it,"SET_SHOW_LOGIN",function(t,e){t.showLogin=e}),Object(ut.a)(it,"SET_USER_INFO",function(t,e){return t.userInfo=e,window.localStorage.setItem("ccwb_user_new_token",e),t.userInfo}),Object(ut.a)(it,"SET_USER_WECHAT_INFO",function(t,e){window.sessionStorage.setItem("USER_WECHAT_INFO",e),t.userWechatInfo=e}),Object(ut.a)(it,"SET_USER_POSITION",function(t,e){t.userPosition=e}),Object(ut.a)(it,"SET_USER_LAT_AND_LON",function(t,e){t.userLatAndLon=e}),it);n("b054"),g.a.use(_.a);var dt=new _.a.Store({actions:o,getters:i,state:H,mutations:ct,strict:!1,plugins:[]}),ft=n("d225"),lt=n("b0b4"),pt=function(){function t(){Object(ft.a)(this,t)}return Object(lt.a)(t,null,[{key:"install",value:function(t){t.prototype.$request=X,t.prototype.$post=Y,t.prototype.$get=K,t.prototype.$response=Q}}]),t}();g.a.use(r.a).use(a.a).use(s.a).use(u.a).use(c.a).use(d.a).use(f.a).use(l.a).use(p.a).use(m.a),N.a.attach(document.body),g.a.use(pt),g.a.use(D.a,{loading:n("a3a0"),preLoad:1.3,error:n("a3a0")}),n("f5df"),n("b37a"),n("ab05"),C.beforeEach(function(t,e,n){t.meta.title&&(document.title=t.meta.title),t.matched.some(function(t){return t.meta.requiresAuth})&&(dt.state.userInfo||(A().isCwApp?dt.dispatch("getUserInfo").then(function(t){t||k()}):(dt.commit("SET_SHOW_LOGIN",!0),n({path:e.fullPath,query:{redirect:t.fullPath}})))),n()}),Object(R.sync)(dt,C);var mt=window.sessionStorage;mt.clear();var ht=1*mt.getItem("count")||0;mt.setItem("/",0),C.beforeEach(function(t,e,n){dt.commit("SET_ISLOADING",{isLoading:!0});var o=mt.getItem(t.path),i=mt.getItem(e.path);if(o?!i||parseInt(o,10)>parseInt(i,10)||"0"===o&&"0"===i?dt.commit("SET_DIRRECTION",{direction:"forward"}):dt.commit("SET_DIRRECTION",{direction:"reverse"}):(++ht,mt.setItem("count",ht),"/"!==t.path&&mt.setItem(t.path,ht),dt.commit("SET_DIRRECTION",{direction:"forward"})),/\/http/.test(t.path)){var r=t.path.split("http")[1];window.location.href="http".concat(r)}else n()}),C.afterEach(function(t){setTimeout(function(){dt.commit("SET_ISLOADING",{isLoading:!1})},200)}),g.a.config.productionTip=!1,g.a.config.devtools=!0,new g.a({store:dt,router:C,render:function(t){return t(y)}}).$mount("#app-box")},5880:function(t,e){t.exports=Vuex},6389:function(t,e){t.exports=VueRouter},"8bbf":function(t,e){t.exports=Vue},a3a0:function(t,e,n){t.exports=n.p+"statics/img/ccwb_common_default_normal.5ec466d3.png"},b37a:function(t,e,n){},cebe:function(t,e){t.exports=axios},de16:function(t,e,n){"use strict";var o=n("f504");n.n(o).a},f504:function(t,e,n){}});